---
title: "Statistical plots"
author: "John Coene"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{John Coene}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

library(echarts4r)
```

```{r}
# data.frame
df <- data.frame(
  x = 1:100,
  y = rnorm(100, 20, 12)
)
```

## Histogram

```{r}
df %>% 
  e_charts() %>% 
  e_histogram(y) %>% 
  e_tooltip()
```

### Density

Plot the density on a different Y axis as its range differs much from the that of the histogram.

```{r}
df %>%
  e_charts() %>% 
  e_histogram(y) %>% 
  e_density(y, name = "density", areaStyle = list(opacity = .4), 
            smooth = TRUE, y.index = 1) %>% 
  e_tooltip()
```

## Fit

Functions leverage R buil-in:

* `lm`
* `glm`
* `loess`

#### Linear

```{r}
df %>% 
  e_charts(x) %>% 
  e_scatter(y) %>% 
  e_lm(y ~ x)
```

#### Generalised Linear

```{r}
CO2 %>% 
  e_charts(conc) %>% 
  e_scatter(uptake) %>% 
  e_glm(uptake ~ conc, name = "GLM")
```

#### Polynomial

```{r}
mtcars %>% 
  e_charts(disp) %>% 
  e_scatter(mpg) %>% 
  e_loess(mpg ~ disp)
```

#### Keras

Plot keras history.

```{r, echo = FALSE}
structure(list(params = structure(list(metrics = c("loss", "acc",
"val_loss", "val_acc"), epochs = 50L, steps = NULL, do_validation = TRUE,
    samples = 68L, batch_size = 25L, verbose = 1L, validation_samples = 7L), .Names = c("metrics",
"epochs", "steps", "do_validation", "samples", "batch_size",
"verbose", "validation_samples")), metrics = structure(list(acc = c(0.0735294101211955,
0.132352938656421, 0.220588230801856, 0.161764707306729, 0.294117646182285,
0.35294118304463, 0.36764705838526, 0.485294109758209, 0.544117631281123,
0.588235296747264, 0.661764691857731, 0.632352932411082, 0.588235296747264,
0.499999995617306, 0.54411764223786, 0.705882361706565, 0.617647055317374,
0.632352955201093, 0.661764691857731, 0.661764704129275, 0.749999989481533,
0.720588247565662, 0.691176467958619, 0.691176467958619, 0.749999985098839,
0.720588247565662, 0.705882361706565, 0.735294137807453, 0.735294103622437,
0.647058836677495, 0.764705878846786, 0.705882362583104, 0.720588252824895,
0.617647060576607, 0.735294133424759, 0.705882357323871, 0.676470582099522,
0.720588230911423, 0.705882345052326, 0.676470604012994, 0.6764705996303,
0.705882353817715, 0.705882379237343, 0.661764726042747, 0.749999988604994,
0.705882362583104, 0.808823527658687, 0.823529417900478, 0.764705879723324,
0.720588230911423), loss = c(2.0660576469758, 1.99683945319232,
1.95483203670558, 1.9064447581768, 1.8034468608744, 1.86623795768794,
1.77855998978895, 1.71669004068655, 1.66122734721969, 1.61088024518069,
1.59075920722064, 1.57837966259788, 1.55926010187934, 1.55458232059198,
1.5626626049771, 1.44145392319735, 1.46900314969175, 1.40251419123481,
1.36689052511664, 1.35799269115224, 1.26676543670542, 1.26180054159725,
1.20250909118091, 1.25656307620161, 1.1863548422561, 1.19643362830667,
1.17428969810991, 1.12035475758945, 1.08536758668282, 1.18256520523744,
1.08798174998339, 0.999415913925451, 1.03854234428967, 1.06687709163217,
0.992210958810414, 1.03758100113448, 0.994289664661183, 1.01384373272167,
0.909824874471216, 0.915756819002769, 0.928737302036846, 0.954933696809937,
0.908137674717342, 0.900008127969854, 0.791025588617605, 0.853402955567136,
0.782849899986211, 0.797247392289779, 0.725946132751072, 0.813696103060947
), val_acc = c(0.142857149243355, 0.142857149243355, 0.428571432828903,
0.428571432828903, 0.571428596973419, 0.571428596973419, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.714285731315613, 0.714285731315613,
0.714285731315613, 0.714285731315613, 0.857142865657806), val_loss = c(2.031325340271,
1.97427487373352, 1.92726135253906, 1.88843464851379, 1.84600067138672,
1.80778419971466, 1.76669657230377, 1.72621142864227, 1.68108594417572,
1.63897025585175, 1.59370386600494, 1.55243480205536, 1.51551449298859,
1.47852385044098, 1.44275331497192, 1.40237522125244, 1.36710214614868,
1.32993257045746, 1.29077565670013, 1.25797390937805, 1.21847546100616,
1.18844985961914, 1.1557811498642, 1.12718331813812, 1.10071218013763,
1.07737362384796, 1.05112981796265, 1.02113938331604, 0.996909558773041,
0.971255481243134, 0.949121475219727, 0.925548076629639, 0.906897366046906,
0.884130835533142, 0.864132642745972, 0.846682965755463, 0.834402322769165,
0.817978262901306, 0.802524149417877, 0.783162832260132, 0.767569601535797,
0.755335986614227, 0.738209784030914, 0.727094709873199, 0.711536407470703,
0.696642816066742, 0.677618682384491, 0.6611607670784, 0.646168172359467,
0.637812376022339)), .Names = c("acc", "loss", "val_acc", "val_loss"
))), .Names = c("params", "metrics"), class = "keras_training_history") -> history
```

```{r}
class(history)

history %>% 
  e_charts() %>% 
  e_keras_history()
```